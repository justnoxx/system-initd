#!/usr/bin/env perl

use strict;
use warnings;
use System::InitD::GenInit;

my $geninit = System::InitD::GenInit->new();

$geninit->run();


exit 0;

__END__

=head1 NAME

geninit

=head1 DESCRIPTION

Простая утилита для генерации файлов для init.d.

В результате работы генерирует скрипты примерно следующего вида:

    #!/usr/bin/env perl
    # created by: noxx
    # check_whois: 
    #
    # chkconfig:    345 88 13
    # description:  whois server
    #
    ### BEGIN INIT INFO
    # Provides:          
    # Required-Start:
    # Required-Stop:
    # Should-Start:
    # Should-Stop:
    # Default-Start:     2 3 4 5
    # Default-Stop:      0 1 6
    # Short-Description: Start and stop whois daemon
    # Description:       
    ### END INIT INFO

    # This script generated by geninit tool

    use strict;
    use warnings;

    use System::InitD::Runner;

    # Config
    # path to pidfile here:
    my $PID             = '/var/run/whois/whois.pid';
    # start command here:
    my $START_COMMAND   = 'perl /www/srs/script/whois_async/whois_daemon.pl --user apache --group apache --port 4343 --daemonize --pid  $PID';
    # EXACT process name here:
    my $PROCESS_NAME    = 'whois_daemon_master';
    my $USAGE           = 'start|stop|usage|status';

    # Run
    my $runner = System::InitD::Runner->new(
        usage               =>  $USAGE,
        # proces name here:
        process_name        =>  $PROCESS_NAME,
        # start cmd here
        start               =>  $START_COMMAND,
        restart_timeout     =>  5,
        pid_file            =>  $PID,
    );

    $runner->run();

    1;



=head1 SYNOPSIS

    B<--os>
        Операционная система, для которой генерируется init скрипт

    B<--author>
        Автор скрипта. Используется для генерации блока описания

    B<--target>
        Файл, куда будет записан init скрипт

    B<--pid-file> B<--pid_file>
        Пид файл скрипта, который используется для мониторинга

    B<--process-name> B<--process_name>
        I<Точное> имя процесса скрипта. Используется для мониторинга и контроля скрипта.

    B<--start-cmd> B<--start_cmd>
        Команда, которой скрипт запускается

    B<--service>
        Название скрипта, который будет запускаться, например, my_cool_daemon
